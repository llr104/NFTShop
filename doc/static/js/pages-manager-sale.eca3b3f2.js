(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-manager-sale"],{"2b44":function(t,n,e){"use strict";e.d(n,"b",(function(){return i})),e.d(n,"c",(function(){return a})),e.d(n,"a",(function(){return o}));var o={navigation:e("64c8").default,uniFormsItem:e("9d02").default,uniEasyinput:e("b335").default},i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",[e("navigation",{attrs:{address:!0}}),e("v-uni-view",{staticClass:"topSpace"},[e("v-uni-text",{staticClass:"t"},[t._v("上下架")])],1),e("v-uni-view",{staticClass:"gs"},[e("uni-forms-item",{attrs:{required:!0,name:"tokenId",label:"tokenId"}},[e("uni-easyinput",{attrs:{type:"number",placeholder:"请输入tokenId"},on:{input:function(n){arguments[0]=n=t.$handleEvent(n),t.gsTokenIdInput.apply(void 0,arguments)}},model:{value:t.tokenId,callback:function(n){t.tokenId=n},expression:"tokenId"}})],1),e("uni-forms-item",{attrs:{required:!0,name:"price",label:"价格"}},[e("uni-easyinput",{attrs:{type:"number",placeholder:"请输入挂售金额,金额为0即为取消挂售"},model:{value:t.price,callback:function(n){t.price=n},expression:"price"}})],1),0==t.isApprove&&t.tokenId&&0==t.approving?e("uni-forms-item",{attrs:{label:"授权",name:"approve"}},[e("v-uni-button",{staticClass:"approve",attrs:{type:"default"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.clickApprove.apply(void 0,arguments)}}},[t._v("授权NFT挂售到平台")])],1):t._e(),0==t.isApprove&&t.tokenId&&t.approving?e("uni-forms-item",{attrs:{label:"授权",name:"approving"}},[e("v-uni-button",{staticClass:"approving",attrs:{type:"default",loading:"true",disabled:"true"}},[t._v("授权NFT中...")])],1):t._e(),t.saling?e("v-uni-button",{attrs:{loading:"true"}},[t._v("修改上链中...")]):t.isApprove&&t.tokenId&&0==t.approving?e("v-uni-button",{on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.cllickGS.apply(void 0,arguments)}}},[t._v("提交")]):t._e()],1)],1)},a=[]},3383:function(t,n,e){var o=e("24fb");n=o(!1),n.push([t.i,'@charset "UTF-8";\n/* 水平间距 */\n/* 水平间距 */.topSpace[data-v-63d3b2a0]{width:100%;background-color:grey;text-align:center}.topSpace .t[data-v-63d3b2a0]{line-height:1.8;font-size:%?40?%;font-weight:bolder}.gs[data-v-63d3b2a0]{margin-top:%?2?%;padding:%?50?%;background-color:#fff}.gs .approve[data-v-63d3b2a0], .gs .approving[data-v-63d3b2a0]{height:%?80?%;background-color:#000;border-radius:%?30?%;text-align:center;line-height:%?80?%;font-weight:700;color:#fff}',""]),t.exports=n},"34a5":function(t,n,e){"use strict";e.r(n);var o=e("b5bf"),i=e.n(o);for(var a in o)"default"!==a&&function(t){e.d(n,t,(function(){return o[t]}))}(a);n["default"]=i.a},"60f8":function(t,n,e){"use strict";var o=e("ba1a"),i=e.n(o);i.a},b5bf:function(t,n,e){"use strict";var o=e("4ea4");e("a9e3"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;o(e("64c8"));var i=e("1c52"),a=e("4f87"),r=a.getETH(),s={data:function(){return{tokenId:0,price:0,approving:!1,isApprove:!0,saling:!1}},methods:{gsTokenIdInput:function(t){var n=this;this.approving=!1,Number(t)&&setTimeout((function(){n.checkApprove()}),10)},checkApprove:function(){var t=this;r.getAccounts((function(n,e){n||0==e.length||a.isApprovedAllNFT(e[0],(function(n,e){t.isApprove=!!n||e}))}))},clickApprove:function(){var t=this;console.log("clickApprove"),r.getAccounts((function(n,e){n||0==e.length||(t.approving=!0,a.setApprovalForAll(e[0]).on("transactionHash",(function(n){i.setTransactionPennding(t.tokenId,n,i.opType.ApprovingNFT)})).on("receipt",(function(n){console.log("receipt:",n),n.status?(t.isApprove=!0,uni.showToast({title:"授权成功"})):(t.isApprove=!1,uni.showToast({title:"授权失败",icon:"error"})),t.approving=!1})).on("error",(function(n){t.approving=!1,t.isApprove=!1,uni.showToast({title:"授权失败",icon:"error"})})))}))},cllickGS:function(){var t=this,n=a.getNFT();this.tokenId&&a.ready((function(){t.tokenSymbol=a.getTokenSymbol(),t.tokenDecimals=a.getTokenDecimals(),r.getAccounts((function(e,o){if(!e){var i=o[0],r=Number(t.tokenId);if(t.price){var s=Number(t.price);s=a.toTokenValue(s),n.methods.setTokenPrice(r,s).send({from:i}).on("transactionHash",(function(n){t.saling=!0})).on("receipt",(function(n){t.saling=!1,uni.showToast({title:"上架成功",icon:"success"})})).on("error",(function(n){t.saling=!1,uni.showToast({title:"上架失败",icon:"error"})}))}}}))}))}}};n.default=s},ba1a:function(t,n,e){var o=e("3383");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=e("4f06").default;i("1b031d8e",o,!0,{sourceMap:!1,shadowMode:!1})},d87a:function(t,n,e){"use strict";e.r(n);var o=e("2b44"),i=e("34a5");for(var a in i)"default"!==a&&function(t){e.d(n,t,(function(){return i[t]}))}(a);e("60f8");var r,s=e("f0c5"),c=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,"63d3b2a0",null,!1,o["a"],r);n["default"]=c.exports}}]);