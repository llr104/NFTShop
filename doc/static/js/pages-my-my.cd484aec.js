(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-my-my"],{"0055":function(t,e,n){"use strict";n.r(e);var o=n("14f9"),r=n("1c9f");for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);n("0173");var c,s=n("f0c5"),i=Object(s["a"])(r["default"],o["b"],o["c"],!1,null,"76977410",null,!1,o["a"],c);e["default"]=i.exports},"0173":function(t,e,n){"use strict";var o=n("7281"),r=n.n(o);r.a},"14f9":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o}));var o={navigation:n("64c8").default,vTabs:n("dbac").default,productList:n("e5f1").default},r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("navigation"),n("v-tabs",{attrs:{tabs:t.tabs,bold:!0,lineScale:.8,fontSize:"34rpx"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.changeTab.apply(void 0,arguments)}},model:{value:t.current,callback:function(e){t.current=e},expression:"current"}}),0==t.current&&t.address?n("product-list",{ref:"pl1",staticClass:"plist",attrs:{filter:t.address,unitSymbol:t.tokenSymbol},on:{clickProduct:function(e){arguments[0]=e=t.$handleEvent(e),t.onClickProduct.apply(void 0,arguments)}}}):t._e(),1==t.current&&t.address?n("product-list-1",{ref:"pl2",staticClass:"plist",attrs:{unitSymbol:t.tokenSymbol},on:{clickProduct:function(e){arguments[0]=e=t.$handleEvent(e),t.onClickProduct.apply(void 0,arguments)}}}):t._e()],1)},a=[]},"1c9f":function(t,e,n){"use strict";n.r(e);var o=n("c4ce"),r=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=r.a},7281:function(t,e,n){var o=n("c455");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=n("4f06").default;r("1b853d03",o,!0,{sourceMap:!1,shadowMode:!1})},c455:function(t,e,n){var o=n("24fb");e=o(!1),e.push([t.i,'@charset "UTF-8";\n/* 水平间距 */\n/* 水平间距 */.v-tabs[data-v-76977410]{margin-top:%?1?%}.plist[data-v-76977410]{margin-top:%?20?%}',""]),t.exports=e},c4ce:function(t,e,n){"use strict";var o=n("4ea4");n("26e9"),n("4ec9"),n("a9e3"),n("d3b7"),n("3ca3"),n("ddb0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n("2909")),a=n("a735"),c=o(n("64c8")),s=o(n("dbac")),i=o(n("e5f1")),u=o(n("fa14")),l=n("f248"),f=n("4f87"),d=f.getETH(),p={components:{navigation:c.default,vtab:s.default,productList:i.default,productList1:u.default},data:function(){return{current:0,address:"",tabs:["我拥有的","我卖出的"],tokenSymbol:""}},onLoad:function(){var t=this;d.getAccounts((function(e,n){e||0==n.length||(t.address=n[0])})),ethereum&&ethereum.on("accountsChanged",(function(e){e.length>0&&(t.address=e[0]),t.$refs.pl1&&t.$refs.pl1.changeFilter(t.address),t.$refs.pl2&&(t.$refs.pl2.loadIds([]),t.saleHistory())})),f.ready((function(){t.tokenSymbol=f.getTokenSymbol()}))},onReachBottom:function(){this.$refs.pl1&&this.$refs.pl1.reachBottom(),this.$refs.pl2&&this.$refs.pl2.reachBottom()},onPullDownRefresh:function(){setTimeout((function(){uni.stopPullDownRefresh()}),2e3)},methods:{changeTab:function(t){console.log("当前选中的项："+t),1==t&&this.saleHistory()},saleHistory:function(){var t=this,e=f.getNFT();d.getBlockNumber().then((function(n){n=Number(n);for(var o=(0,l.fromBlock)();o<=n;o+=5e3){var r=Math.min(n,o+5e3);e.getPastEvents("SetOnSale",{filter:{_from:t.address,_op:"1"},fromBlock:o,toBlock:r},(function(e,n){if(!e){var o=n.reverse(),r=t.cal(o);t.$refs.pl2&&t.$refs.pl2.loadIds(r)}}))}}))},cal:function(t){if(!t)return[];for(var e=new Map,n=0;n<t.length;n++){var o=t[n].returnValues._from,c=t[n].returnValues._op;if("1"==c&&(0,a.isSameAddress)(this.address,o)){var s=t[n].returnValues._tokenId;e.set(s,s)}}return(0,r.default)(e.values())},onClickProduct:function(t){console.log("onClickProduct:",t);var e="";e=0==t.nftType?"../itembb/itembb?id="+t.id:"../item/item?id="+t.id,uni.navigateTo({url:e,complete:function(t){console.log(t)}})}}};e.default=p}}]);